(function(t){function e(e){for(var n,r,s=e[0],c=e[1],l=e[2],d=0,m=[];d<s.length;d++)r=s[d],o[r]&&m.push(o[r][0]),o[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(m.length)m.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,s=1;s<a.length;s++){var c=a[s];0!==o[c]&&(n=!1)}n&&(i.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},o={app:0},i=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},1:function(t,e){},2:function(t,e){},"2f42":function(t,e,a){"use strict";var n=a("7d5c"),o=a.n(n);o.a},"56d7":function(t,e,a){"use strict";a.r(e);a("6762"),a("2fdb"),a("cadf"),a("551c"),a("097d"),a("54ba");var n=a("2b0e"),o=a("bb71");a("da64");n["a"].use(o["a"],{iconfont:"md"});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("router-view")],1)},r=[],s=new n["a"],c={name:"App",data:function(){return{authenticated:!1,email:null}},methods:{setAuthenticated:function(t,e){localStorage.auth=t,this.authenticated=!0,this.email=e},mounted:function(){try{this.token=localStorage.getItem("b_token")}catch(t){}}}},l=c,u=a("2877"),d=a("6544"),m=a.n(d),h=a("7496"),p=Object(u["a"])(l,i,r,!1,null,null,null);p.options.__file="App.vue";var v=p.exports;m()(p,{VApp:h["a"]});var f=a("8c4f"),g=a("2f62"),_=a("bc3a"),b=a.n(_),x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"inspire"}},[a("v-toolbar",{attrs:{color:"blue-grey",dark:"",fixed:"",app:""}},[a("v-toolbar-side-icon"),a("v-toolbar-title",[t._v("Toolbar")]),a("v-spacer"),a("v-toolbar-side-icon")],1),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md2:""}},[a("Rooms"),a("Rooms")],1),a("v-flex",{attrs:{xs6:""}},[a("v-card",{staticClass:"card-height",attrs:{dark:"",tile:"",flat:"",color:""}},[a("v-toolbar-title",[t._v("Team Video Feed")]),a("v-card-text",[t.video_room_loading?a("v-progress-circular",{staticClass:"video-loading",attrs:{size:70,width:7,indeterminate:""}}):a("div",{attrs:{id:"team-video"}})],1)],1),a("ChatRoom",{attrs:{messages:t.chat_messages,chat_loading:t.chat_loading,email:t.email},on:{"new-message":t.addMessage}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-card",{staticClass:"card-height",attrs:{dark:"",tile:"",flat:"",color:"red darken-4"}},[a("v-toolbar-title",[t._v("Master Video Feed")]),a("v-card-text",[t.video_room_loading?a("v-progress-circular",{staticClass:"video-loading",attrs:{size:70,width:7,indeterminate:""}}):a("div",{attrs:{id:"master-video"}})],1)],1),a("v-card",{staticClass:"card-height",attrs:{dark:"",tile:"",flat:"",color:"red darken-4"}},[a("v-toolbar-title",[t._v("Game Play")]),a("v-card-text",[t.video_room_loading?a("v-progress-circular",{staticClass:"video-loading",attrs:{size:70,width:7,indeterminate:""}}):a("span",[t._v(" %444 ")])],1)],1)],1)],1)],1)],1),a("v-navigation-drawer",{attrs:{right:"",temporary:"",fixed:""}}),a("Footer")],1)},k=[],w=a("ade3"),C=(a("5df3"),a("1c4c"),a("ac6a"),a("96cf"),a("1da1")),V=a("de1e"),y=a.n(V),T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"card-margin-bottom"},[a("v-toolbar",{attrs:{color:"orange lighten-1",dark:""}},[a("v-toolbar-title",[t._v("Team")])],1),a("v-list",{attrs:{"two-line":""}},[t._l(t.rooms,function(e,n){return[a("v-list-tile",{key:n,class:t.active_room==e.name?"nav-active":"",attrs:{avatar:"",ripple:""},on:{click:function(a){t.showRoom(e.name)}}},[a("v-list-tile-avatar",[a("img",{attrs:{src:e.avatar}})]),a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(e.name))]),a("v-list-tile-sub-title",[t._v(t._s(e.name))])],1)],1)]})],2)],1)},L=[],j={name:"Rooms",data:function(){return{active_room:null,rooms:[{id:1,name:"The Winners",avatar:"https://picsum.photos/250/300?image=783"},{id:2,name:"Remote Control",avatar:"https://picsum.photos/250/300?image=783"},{id:3,name:"Team Fabulous",avatar:"https://picsum.photos/250/300?image=783"},{id:4,name:"Slow Down",avatar:"https://picsum.photos/250/300?image=783"}],roomCount:4,loading:!1}},created:function(){var t=this;s.$on("new_room",function(e){t.roomCount++,t.rooms.push({id:t.roomCount,name:e})})},methods:{showRoom:function(t){this.active_room=t,s.$emit("show_room",t)}}},O=j,R=(a("2f42"),a("b0af")),S=a("8860"),A=a("ba95"),E=a("c954"),P=a("5d23"),$=a("71d9"),F=a("2a7f"),M=Object(u["a"])(O,T,L,!1,null,"35da9919",null);M.options.__file="Rooms.vue";var I=M.exports;m()(M,{VCard:R["a"],VList:S["a"],VListTile:A["a"],VListTileAvatar:E["a"],VListTileContent:P["a"],VListTileSubTitle:P["b"],VListTileTitle:P["c"],VToolbar:$["a"],VToolbarTitle:F["a"]});var B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-footer",{attrs:{dark:"",height:"auto"}},[a("v-card",{staticClass:"indigo lighten-1 white--text text-xs-center",attrs:{flat:"",tile:""}},[a("v-card-text",[a("v-btn",{staticClass:"mx-3 white--text",attrs:{icon:""}},[a("v-icon",{attrs:{size:"24px"}})],1)],1),a("v-card-text",{staticClass:"white--text pt-0"},[t._v("\n      Phasellus feugiat arcu sapien, et iaculis ipsum elementum sit amet. Mauris cursus commodo interdum. Praesent ut risus eget metus luctus accumsan id ultrices nunc. Sed at orci sed massa consectetur dignissim a sit amet dui. Duis commodo vitae velit et faucibus. Morbi vehicula lacinia malesuada. Nulla placerat augue vel ipsum ultrices, cursus iaculis dui sollicitudin. Vestibulum eu ipsum vel diam elementum tempor vel ut orci. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.\n    ")]),a("v-divider"),a("v-card-text",{staticClass:"white--text"},[t._v("\n      ©2018 — "),a("strong",[t._v("Vuetify")])])],1)],1)},D=[],U={name:"Footer"},z=U,J=(a("760c"),a("8336")),N=a("99d9"),q=a("ce7e6"),G=a("553a"),W=a("132d"),H=Object(u["a"])(z,B,D,!1,null,null,null);H.options.__file="Footer.vue";var K=H.exports;m()(H,{VBtn:J["a"],VCard:R["a"],VCardText:N["b"],VDivider:q["a"],VFooter:G["a"],VIcon:W["a"]});var Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"card-height",attrs:{dark:"",tile:"",flat:"",color:""}},[a("v-toolbar-title",[t._v("Ragamuffings Chat")]),t.chat_loading?a("v-progress-circular",{staticClass:"chat-loading",attrs:{size:70,width:7,indeterminate:""}}):a("div",[a("v-card-text",{attrs:{id:"messages"}},t._l(t.messages,function(e,n){return a("div",{key:n,staticClass:"chat-message",class:e.author==t.email?"right":""},[a("v-list-tile-avatar",{staticClass:"circle"},[a("img",{attrs:{src:"https://picsum.photos/250/300?image=783"}})]),t._v("\n                "+t._s(e.body)+"\n            ")],1)}),0),a("v-container",{staticClass:"input-form",attrs:{fluid:"","grid-list-md":"","text-xs-center":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md12:""}},[a("v-textarea",{attrs:{box:"",label:"message",rows:"1",width:"50px"},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1),a("button",{staticStyle:{"margin-left":"-30px","z-index":"3"},attrs:{type:"submit"}},[a("i",{staticClass:"material-icons",on:{click:function(e){t.sendMessage(t.message)}}},[t._v("send")])])],1)],1)],1)],1)},X=[],Y={name:"ChatRoom",props:{email:String,messages:Array,chat_loading:Boolean},data:function(){return{message:""}},methods:{sendMessage:function(t){this.message="",this.$emit("new-message",t)}},created:function(){}},Z=Y,tt=(a("6028"),a("a523")),et=a("0e8f"),at=a("a722"),nt=a("490a"),ot=a("a844"),it=Object(u["a"])(Z,Q,X,!1,null,null,null);it.options.__file="ChatRoom.vue";var rt,st=it.exports;m()(it,{VCard:R["a"],VCardText:N["b"],VContainer:tt["a"],VFlex:et["a"],VLayout:at["a"],VListTileAvatar:E["a"],VProgressCircular:nt["a"],VTextarea:ot["a"],VToolbarTitle:F["a"]});var ct=a("dd8f"),lt=(rt={name:"App",components:{Rooms:I,Footer:K,ChatRoom:st},props:{email:String},data:function(){return{chat:null,authenticated:!0,video_room_loading:!1,chat_loading:!1,active_room:null,video_client:null,room_name:null,chat_client:null,chat_channel:null,chat_messages:[]}}},Object(w["a"])(rt,"props",["email"]),Object(w["a"])(rt,"created",function(){var t=this;s.$on("show_room",function(e){t.createChat(e)}),window.addEventListener("beforeunload",this.leaveRoomIfJoined),console.log(this.$http)}),Object(w["a"])(rt,"methods",{setAuthenticated:function(t){localStorage.auth=t,this.authenticated=!0},getAccessToken:function(){var t=Object(C["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b.a.post("/api/generate_video_token",{identity:this.email});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),attachTracks:function(t,e){t.forEach(function(t){e.appendChild(t.attach())})},attachParticipantTracks:function(t,e){var a=Array.from(t.tracks.values());this.attachTracks(a,e)},detachTracks:function(t){t.forEach(function(t){t.detach().forEach(function(t){t.remove()})})},detachParticipantTracks:function(t){var e=Array.from(t.tracks.values());this.detachTracks(e)},leaveRoomIfJoined:function(){this.active_room&&this.active_room.disconnect()},createChat:function(t){var e=this;this.loading=!0;this.getAccessToken().then(function(a){if(200==a.status){e.video_room_loading=!0,e.chat_loading=!0,e.room_name=null;var n=a.data.token,o={name:t,audio:!0,video:{width:120,height:120}};e.leaveRoomIfJoined(),ct.Client.create(n).then(function(a){a.getPublicChannelDescriptors().then(function(t){}),e.chat_client=a,e.addChannel(t),e.chat_loading=!1}),y.a.connect(n,o).then(function(a){e.dispatchLog("Successfully joined a Room: "+t),e.active_room=a,e.room_name=t,e.video_room_loading=!1,a.participants.forEach(function(t){console.log(t);var e=document.getElementById("team-video");this.attachParticipantTracks(t,e)}),a.on("participantConnected",function(t){this.dispatchLog("Joining: '"+t.identity+"'")}),a.on("trackSubscribed",function(t,e){this.dispatchLog(e.identity+" added track: "+t.kind);var a=document.getElementById("team-video");this.attachTracks([t],a)}),a.on("trackUnsubscribed",function(t,e){this.dispatchLog(e.identity+" removed track: "+t.kind),this.detachTracks([t])}),a.on("participantDisconnected",function(t){this.dispatchLog("Participant '"+t.identity+"' left the room"),this.detachParticipantTracks(t)}),e.localTrack||y.a.createLocalVideoTrack().then(function(t){console.group(t);var a=document.getElementById("master-video");a.appendChild(t.attach()),e.localTrack=!0})},function(t){console.error("Unable to connect to Room: "+t.message)})}})},dispatchLog:function(t){s.$emit("new_log",t)},setupChannel:function(){var t=Object(C["a"])(regeneratorRuntime.mark(function t(e){var a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.chat_channel=e,e.decline().then(function(t){t.join().then(function(t){t.getMessages().then(function(t){a.chat_messages=t.items}),t.on("messageAdded",function(t){a.chat_messages.push(t.state)})}).catch(function(e){t.on("messageAdded",function(t){a.chat_messages.push(t.state)}),t.getMessages().then(function(t){a.chat_messages=t.items})})});case 2:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),addMessage:function(t){this.chat_channel&&(console.log(this.chat_channel),this.chat_channel.sendMessage(t))},addChannel:function(){var t=Object(C["a"])(regeneratorRuntime.mark(function t(e){var a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.chat_client.createChannel({uniqueName:e}).then(function(t){return a.setupChannel(t)}).catch(function(t){a.chat_client.getChannelByUniqueName(e).then(function(t){return a.setupChannel(t)}).catch(function(t){return console.log(t.message)})});case 1:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()}),rt),ut=lt,dt=(a("99ab"),a("549c")),mt=a("f774"),ht=a("9910"),pt=a("706c"),vt=Object(u["a"])(ut,x,k,!1,null,"4e36f408",null);vt.options.__file="Dashboard.vue";var ft=vt.exports;m()(vt,{VApp:h["a"],VCard:R["a"],VCardText:N["b"],VContainer:tt["a"],VContent:dt["a"],VFlex:et["a"],VLayout:at["a"],VNavigationDrawer:mt["a"],VProgressCircular:nt["a"],VSpacer:ht["a"],VToolbar:$["a"],VToolbarSideIcon:pt["a"],VToolbarTitle:F["a"]});var gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"inspire"}},[a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Login form")])],1),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{"prepend-icon":"person",label:"email",type:"text"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{id:"password","prepend-icon":"lock",label:"Password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:t.login}},[t._v("Login")])],1)],1)],1)],1)],1)],1)],1)},_t=[],bt=a("be94"),xt={data:function(){return{email:"",password:"",loading:!1}},props:{source:String},methods:Object(bt["a"])({login:function(){var t=this;this.loading=!0,this.$http.post("/api/login",{email:this.email,password:this.password}).then(function(e){if("success"==e.data.status){var a=e.data.access_token;t.proccessing=!1,t.$emit("authenticated",a,t.email),t.updateAccessToken(a),t.updateLoggedUserEmail(t.email),t.$router.push("/")}else t.message="Login Faild, try again"}).catch(function(e){t.message="Login Faild, try again",t.proccessing=!1})}},Object(g["b"])({updateLoggedUserEmail:"updateLoggedUserEmail",updateAccessToken:"updateAccessToken"})),created:function(){}},kt=xt,wt=a("4bd4"),Ct=a("2677"),Vt=Object(u["a"])(kt,gt,_t,!1,null,null,null);Vt.options.__file="Login.vue";var yt=Vt.exports;m()(Vt,{VApp:h["a"],VBtn:J["a"],VCard:R["a"],VCardActions:N["a"],VCardText:N["b"],VContainer:tt["a"],VContent:dt["a"],VFlex:et["a"],VForm:wt["a"],VLayout:at["a"],VSpacer:ht["a"],VTextField:Ct["a"],VToolbar:$["a"],VToolbarTitle:F["a"]});var Tt=[{path:"/",component:ft},{path:"/login",component:yt}],Lt=["/login"],jt={setAuthenticated:function(t,e,a){t.count++}},Ot={increment:function(t){t.count++},updateAccessToken:function(t,e){t.token=e,localStorage.token=e},updateLoggedUserEmail:function(t,e){t.logged_user_email=e}},Rt={token:localStorage.getItem("token")||null,logged_user_email:null},St={state:Rt,mutations:Ot,actions:jt};n["a"].config.productionTip=!1,n["a"].use(f["a"]),n["a"].use(g["a"]),n["a"].prototype.$http=b.a;var At=new f["a"]({routes:Tt}),Et=new g["a"].Store(St);At.beforeEach(function(t,e,a){if(!Lt.includes(t.path)&&!localStorage.getItem("token"))return a("/login");a()}),new n["a"]({render:function(t){return t(v)},router:At,store:Et}).$mount("#app")},"59ed":function(t,e,a){},6028:function(t,e,a){"use strict";var n=a("59ed"),o=a.n(n);o.a},"760c":function(t,e,a){"use strict";var n=a("93ff"),o=a.n(n);o.a},"7d5c":function(t,e,a){},"93ff":function(t,e,a){},"99ab":function(t,e,a){"use strict";var n=a("cdcc"),o=a.n(n);o.a},cdcc:function(t,e,a){}});
//# sourceMappingURL=app.e3ada19f.js.map